on:
  pull_request:
    branches: [ master ]
jobs:
  Build_And_Test:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸš§ Checkout repository
        uses: actions/checkout@v3
      - name: ğŸš§ Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: 18.x
          cache: npm
      - name: ğŸ“¦ Install dependencies
        run: npm install
      - name: ğŸ—ï¸ Build and ğŸ§ª Test
        run: npm run test
  Eas_Build_Development:
    needs: Build_And_Test
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ›‚ Check for EXPO_TOKEN
        run: |
          if [ -z "${{ secrets.EXPO_TOKEN }}" ]; then
            echo "You must provide an EXPO_TOKEN secret linked to this project's Expo account in this repo's secrets. Learn more: https://docs.expo.dev/eas-update/github-actions"
            exit 1
          fi
      - name: ğŸš§ Checkout repository
        uses: actions/checkout@v3
      - name: ğŸš§ Setup Node
        uses: actions/setup-node@v3
        with:
          node-version: 18.x
          cache: npm
      - name: ğŸš§ Setup EAS
        uses: expo/expo-github-action@v8
        with:
          eas-version: latest
          packager: npm
          token: ${{ secrets.EXPO_TOKEN }}
      - name: ğŸ—ï¸ Eas Build
        run: eas build --platform android --profile development --no-interactive
      
        
